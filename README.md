# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types — Директория с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Компоненты модели данных (бизнес-логика)

Описаны интерфейсы для получения данных с сервера, а также модели состояний для хранения данных и выполнения действий над ними.

### 1. Сущности приложения

В файле `src/types/entity.ts` представлены модели данных, используемые для оптравки данных на сервер или получения их:
- `IProduct` - хранит информацию о товаре
- `IOrder` - хранит информацию для создания нового заказа
- `IOrderResult` - содержит информацию, в случае успешного создания заказа

### 2. API интерфейсы

Для работы с внешним источником данных (REST API сервером) в файле `src/types/api.ts` описаны интерфейсы `IProductAPI` и `IOrderApi`

`IProductApi` предоставляет методы:
- `getProducts` - получение коллекции всех товаров, хранящихся на сервере
- `getProduct` - получение одного товара по уникальному аттрибуту `id`

`IOrderApi` предоставляет методы:
- `createOrder` - создание нового заказа на сервере, возвращает объект `IOrderResult`

### 3. Модели данных

Для хранения и управления данными в приложении был добавлен набор интерфейсов, реализующих слой Component.

Модель `ICatalogModel` агрегирует коллекцию каталога товаров, а также методы для работы с коллекцией:
- `products` - хранит коллекцию товаров
- `setProducts` - метод установки коллекции товаров
- `getProduct` - метод, для получение одного товара из коллекции по атрибуту `id`

Модель `IBasketModel` описывает свойства и методы для работы с корзиной товаров:
- `products` - хранит товары добавленные в корзину в формате `Map<key, value>`, где `key` - идентификатор товара, `value` - сам товар
- `addProduct` - метод, для добавления товара в корзину
- `removeProduct` - метод, для удаления товара из корзины по идентификатору
- `getTotal` - метод, для получения общего количества товаров в корзине
- `clear` - метод, для очистки всей корзины, может быть использован после того как заказ оформлен

Модель `IOrderModel` агрегирует информацию пользователя, необходимую для создания заказа:
- `buyer` - интерфейс `IBuyerInfo` описывает объект, хранящий информацию о способе оплаты, адресе доставки, email и телефоне
- `changeBuyerField` - метод для обновления полей объекта `buyer`
- `reset` - метод, для очисти данных о покупателе, может быть использован после того как заказ создан

```ts
export interface IBuyerInfo {
  payment: PaymentType | null
  address: string
  email: string
  phone: string
}
```

## Компоненты отображения

В директории `src/types/view` собраны интерфейсы данных и настроек компонентов отображения:

- `BasketData` - описывает данные необходимые для отображения корзины товаров
- `CardBasketData` - описывает данные необходимые для отображения одного элемента карточки товара в корзине
- `CardCatalogData` - описывает данные необходимые для отображения одного элемента карточки товара в каталоге всех товаров
- `CardPreviewData` - описывает данные необходимые для превью выделенной карточки товара
- `ContactsData` - описывает данные необходимые для отображения email и телефона при создании заказа
- `OrderData` - описывает данные необходимые для отображения способа оплаты и адреса доставки при создании заказа
- `SuccessData` - описывает данные необходимые для отображения после успешного офрмления заказа

## Компоненты представления

В файле `src/types/application.ts` описан интерфейс `IApplication`, который реализует глобальное состояние всего приложение и связывает компоненты.
Помимо этого в файле `src/types/events.ts` были добавлены перечисления (enum) для различных типов событий, а также интерфейсы событий, предназаначенные для передачи данных между слоями архитектуры:

- `CatalogUpdateEvent` - событие, генерируемое после того, как каталог товаров был загружен с сервера
- `OrderPreparedEvent` - событие, генерируемое после успешного заполнения всех форм для создания заказа
- `OrderCreatedEvent` - событие, генерируемое после успешного создания нового заказа на сервере
- `BasketProductEvent` - событие, генерируемое при добавлении товара в корзину или удалении из него
- `BuyerInfoChangeEvent` - событие, генерируемое при изменении данных необходимых для создания заказа
